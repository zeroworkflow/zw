# Руководство: `zw commit`

Команда `zw commit` — это мощный инструмент на базе ИИ, который анализирует ваши проиндексированные (staged) изменения и автоматически генерирует профессиональные сообщения для коммитов, следуя стандарту [Conventional Commits](https://www.conventionalcommits.org/).

## Основные возможности

- **Автоматическая генерация**: ИИ анализирует `git diff` и создает релевантное сообщение для коммита.
- **Интерактивный режим**: Вы можете принять, отклонить или запросить новый вариант сообщения.
- **Многоязычность**: Поддерживается генерация сообщений на нескольких языках.
- **Автопуш**: Возможность автоматически отправить коммит на удаленный сервер.

## Как использовать

1.  **Проиндексируйте изменения**: Перед использованием команды убедитесь, что вы добавили нужные файлы в индекс с помощью `git add`.

    ```bash
    git add <file1> <file2>
    ```

2.  **Запустите команду**:

    ```bash
    zw commit
    ```

3.  **Следуйте инструкциям**: Инструмент покажет проиндексированные файлы и сгенерированное ИИ сообщение коммита.

    ```
    Staged files:
      ✓ src/cmd/commit.go

    Analyzing changes with AI...

    Generated commit message:
    → feat(cmd): enhance commit workflow with regeneration option
        - Added interactive commit regeneration option with 'r' command
        - Improved error handling for empty commit message generation

    Proceed with commit? (y/N/r to regenerate): _
    ```

4.  **Выберите действие**:
    - `y` или `yes`: Принять сообщение и создать коммит.
    - `n` или `no` (или любая другая клавиша): Отменить коммит.
    - `r`: Запросить у ИИ новый вариант сообщения.

## Флаги

### `--lang, -l`

Устанавливает язык для генерируемого сообщения коммита. По умолчанию используется `en` (английский).

```bash
zw commit --lang ru
```

Поддерживаемые языки:
- `en`: Английский
- `ru`: Русский
- `uk`: Украинский
- `kz`: Казахский

### `--push, -p`

Автоматически выполняет `git push` после успешного создания коммита. Требует наличия настроенного remote с именем `origin`.

```bash
zw commit -p
```

## Требования к конфигурации

1.  **Git `user.name` и `user.email`**

    Для создания коммитов необходимо, чтобы в вашей конфигурации Git были указаны имя пользователя и email. Если они не настроены, команда выведет ошибку.

    Для настройки выполните:
    ```bash
    git config --global user.name "Your Name"
    git config --global user.email "your.email@example.com"
    ```

2.  **Токен для ИИ (`AI_TOKEN`)**

    Для работы с ИИ требуется токен. Создайте файл `.env` в корне проекта или в домашней директории (`~/.config/zw/.env`) и добавьте в него:

    ```
    AI_TOKEN="ваш_секретный_токен"
    ```
